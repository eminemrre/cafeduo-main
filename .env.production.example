# CafeDuo Production Environment Template
# Copy this file to .env.production and fill in the actual values
# NEVER commit the actual .env file to version control

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=3001

# ============================================
# SECURITY - CRITICAL SECRETS
# ============================================
# Generate with: openssl rand -hex 64
JWT_SECRET=YOUR_JWT_SECRET_HERE_MIN_64_CHARS

# Token expiration times
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Proxy configuration
TRUST_PROXY=1

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Use DATABASE_URL for connection string format
# Or use individual parameters below
DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/DATABASE

DB_USER=postgres
DB_PASSWORD=YOUR_SECURE_DB_PASSWORD_HERE
DB_NAME=cafeduo
DB_HOST=localhost
DB_PORT=5432

# SSL Configuration (recommended for production)
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=true

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins (NO SPACES)
# Example: https://example.com,https://www.example.com
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_URL=redis://localhost:6379

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_STORE=redis
RATE_LIMIT_REDIS_PREFIX=cafeduo:ratelimit
RATE_LIMIT_PASS_ON_STORE_ERROR=false

# Auth-specific rate limits
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_LOGIN_RATE_LIMIT_MAX_REQUESTS=20
AUTH_REGISTER_RATE_LIMIT_MAX_REQUESTS=10
AUTH_GOOGLE_RATE_LIMIT_MAX_REQUESTS=30
AUTH_FORGOT_PASSWORD_RATE_LIMIT_MAX_REQUESTS=6
AUTH_RESET_PASSWORD_RATE_LIMIT_MAX_REQUESTS=12

# ============================================
# BLACKLIST CONFIGURATION
# ============================================
# 'closed' = reject requests when blacklist check fails (recommended)
# 'open' = allow requests when blacklist check fails (less secure)
BLACKLIST_FAIL_MODE=closed

# ============================================
# GOOGLE OAUTH (Optional)
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# ============================================
# reCAPTCHA (Recommended)
# ============================================
# Get from: https://www.google.com/recaptcha/admin
VITE_RECAPTCHA_SITE_KEY=your-recaptcha-site-key
RECAPTCHA_SITE_KEY=your-recaptcha-site-key
RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key
ENABLE_RECAPTCHA=true

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# SMTP settings for password reset emails
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@yourdomain.com

# Password reset token TTL (minutes)
PASSWORD_RESET_TOKEN_TTL_MINUTES=30

# ============================================
# FRONTEND BUILD-TIME VARIABLES
# ============================================
# Leave empty for same-domain deployment behind reverse proxy
VITE_API_BASE_URL=
VITE_SOCKET_URL=

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info
REQUEST_LOG_SLOW_MS=1200

# ============================================
# BOOTSTRAP ADMIN EMAILS
# ============================================
# Comma-separated list of emails that automatically get admin role
BOOTSTRAP_ADMIN_EMAILS=admin@yourdomain.com

# ============================================
# DOMAIN / TLS (for Caddy/SSL)
# ============================================
SITE_ADDRESS=yourdomain.com,www.yourdomain.com
ACME_EMAIL=admin@yourdomain.com

# ============================================
# APPLICATION METADATA
# ============================================
APP_VERSION=1.0.0
APP_BUILD_TIME=
